basePath: /api/v1
definitions:
  models.Account:
    properties:
      accepts_movement:
        type: boolean
      account_type:
        description: ASSET, LIABILITY, EQUITY, REVENUE, EXPENSE
        type: string
      balance_credit:
        type: number
      balance_debit:
        type: number
      code:
        type: string
      created_at:
        type: string
      current_balance:
        type: number
      description:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      level:
        description: 1,2,3,4,5 según PUC
        type: integer
      name:
        type: string
      natural_balance:
        description: DEBIT, CREDIT
        type: string
      organization_id:
        type: string
      parent_account_id:
        type: string
      puc_code:
        description: Código oficial PUC
        type: string
      requires_cost_center:
        type: boolean
      requires_third_party:
        type: boolean
      updated_at:
        type: string
    type: object
  models.AccountingConfig:
    properties:
      allow_negative_inventory:
        type: boolean
      auto_numbering:
        type: boolean
      current_period:
        type: string
      default_payment_terms:
        type: integer
      default_tax_rate:
        type: number
      last_closed_period:
        type: string
      require_balanced_entries:
        type: boolean
    type: object
  models.ContactInfo:
    properties:
      address:
        type: string
      city:
        type: string
      email:
        type: string
      phone:
        type: string
      postal_code:
        type: string
      state:
        type: string
      website:
        type: string
    type: object
  models.DSLConfig:
    properties:
      auto_process_vouchers:
        type: boolean
      error_handling:
        type: string
      parallel_processing:
        type: boolean
      template_cache_enabled:
        type: boolean
      validation_level:
        type: string
    type: object
  models.DSLProcessingInfo:
    properties:
      execution_time_ms:
        type: integer
      generated_lines:
        type: integer
      processed_at:
        type: string
      processing_status:
        description: SUCCESS, ERROR, PENDING
        type: string
      template_id:
        type: string
      template_name:
        type: string
      validation_errors:
        items:
          type: string
        type: array
      variables:
        additionalProperties: true
        type: object
    type: object
  models.ErrorInfo:
    properties:
      code:
        type: string
      details:
        items:
          type: string
        type: array
      message:
        type: string
    type: object
  models.FiscalInfo:
    properties:
      accounting_standard:
        type: string
      decimal_places:
        type: integer
      fiscal_year_end:
        type: string
      fiscal_year_start:
        type: string
      reporting_currency:
        type: string
      rounding_method:
        type: string
      tax_regime:
        type: string
    type: object
  models.OrganizationDetail:
    properties:
      accounting_configuration:
        $ref: '#/definitions/models.AccountingConfig'
      code:
        type: string
      commercial_name:
        type: string
      contact_info:
        $ref: '#/definitions/models.ContactInfo'
      country_code:
        type: string
      created_at:
        type: string
      currency_default:
        type: string
      document_type:
        type: string
      dsl_configuration:
        $ref: '#/definitions/models.DSLConfig'
      fiscal_info:
        $ref: '#/definitions/models.FiscalInfo'
      id:
        type: string
      is_active:
        type: boolean
      language:
        type: string
      name:
        type: string
      statistics:
        $ref: '#/definitions/models.OrganizationStatistics'
      subscription_info:
        $ref: '#/definitions/models.SubscriptionInfo'
      system_settings:
        $ref: '#/definitions/models.SystemSettings'
      tax_id:
        type: string
      timezone:
        type: string
      updated_at:
        type: string
      user_permissions:
        $ref: '#/definitions/models.UserPermissions'
    type: object
  models.OrganizationStatistics:
    properties:
      active_users:
        type: integer
      api_calls_month:
        type: integer
      storage_used_mb:
        type: integer
      total_accounts:
        type: integer
      total_journal_entries:
        type: integer
      total_vouchers:
        type: integer
    type: object
  models.PaginationInfo:
    properties:
      limit:
        type: integer
      page:
        type: integer
      pages:
        type: integer
      total:
        type: integer
    type: object
  models.Period:
    properties:
      closed_at:
        type: string
      closed_by_user_id:
        type: string
      code:
        type: string
      created_at:
        type: string
      end_date:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      is_current:
        type: boolean
      month:
        description: NULL para períodos anuales
        type: integer
      name:
        type: string
      organization_id:
        type: string
      period_type:
        description: MONTHLY, QUARTERLY, YEARLY
        type: string
      quarter:
        description: NULL para períodos mensuales/anuales
        type: integer
      start_date:
        type: string
      status:
        description: OPEN, CLOSED, LOCKED
        type: string
      updated_at:
        type: string
      year:
        type: integer
    type: object
  models.StandardResponse:
    properties:
      data: {}
      error:
        $ref: '#/definitions/models.ErrorInfo'
      success:
        type: boolean
      timestamp:
        type: string
    type: object
  models.SubscriptionInfo:
    properties:
      current_month_vouchers:
        type: integer
      current_users:
        type: integer
      expires_at:
        type: string
      features:
        items:
          type: string
        type: array
      max_monthly_vouchers:
        type: integer
      max_users:
        type: integer
      plan:
        type: string
      status:
        type: string
    type: object
  models.SystemSettings:
    properties:
      audit_level:
        type: string
      backup_frequency:
        type: string
      notification_preferences:
        additionalProperties: true
        type: object
      retention_period_days:
        type: integer
    type: object
  models.ThirdParty:
    properties:
      code:
        type: string
      commercial_name:
        type: string
      company_name:
        type: string
      created_at:
        type: string
      document_number:
        type: string
      document_type:
        description: CC, NIT, CE, PP, etc.
        type: string
      first_name:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      last_name:
        type: string
      organization_id:
        type: string
      person_type:
        description: NATURAL, JURIDICA
        type: string
      taxpayer_type:
        description: RESPONSABLE_IVA, NO_RESPONSABLE_IVA, REGIMEN_SIMPLE
        type: string
      third_party_type:
        description: CUSTOMER, SUPPLIER, EMPLOYEE, OTHER
        type: string
      updated_at:
        type: string
      verification_digit:
        type: string
    type: object
  models.UserPermissions:
    properties:
      can_close_periods:
        type: boolean
      can_edit_dsl_templates:
        type: boolean
      can_edit_organization:
        type: boolean
      can_manage_users:
        type: boolean
      can_view_all_data:
        type: boolean
    type: object
  models.Voucher:
    properties:
      cost_center_id:
        type: string
      created_at:
        type: string
      created_by_user_id:
        type: string
      date:
        type: string
      description:
        type: string
      id:
        type: string
      is_balanced:
        type: boolean
      number:
        type: string
      organization_id:
        type: string
      period_id:
        type: string
      posted_at:
        type: string
      posted_by_user_id:
        type: string
      reference:
        type: string
      status:
        description: DRAFT, POSTED, CANCELLED
        type: string
      third_party_id:
        type: string
      total_credit:
        type: number
      total_debit:
        type: number
      updated_at:
        type: string
      voucher_lines:
        items:
          $ref: '#/definitions/models.VoucherLine'
        type: array
      voucher_type:
        description: JOURNAL, PURCHASE, SALE, PAYMENT, RECEIPT, ADJUSTMENT
        type: string
    type: object
  models.VoucherAdditionalData:
    properties:
      approval_required:
        type: boolean
      approved_at:
        type: string
      approved_by:
        type: string
      auto_generated:
        type: boolean
      custom_fields:
        additionalProperties: true
        type: object
      reversal_of:
        type: string
      reversible:
        type: boolean
      source_reference:
        type: string
      source_system:
        type: string
    type: object
  models.VoucherAttachment:
    properties:
      content_type:
        type: string
      description:
        type: string
      file_name:
        type: string
      file_path:
        type: string
      file_size:
        type: integer
      id:
        type: string
      uploaded_at:
        type: string
      uploaded_by:
        type: string
    type: object
  models.VoucherCreateRequest:
    properties:
      additional_data:
        $ref: '#/definitions/models.VoucherAdditionalData'
      cost_center_id:
        type: string
      date:
        type: string
      description:
        type: string
      reference:
        type: string
      third_party_id:
        type: string
      voucher_lines:
        items:
          $ref: '#/definitions/models.VoucherLineRequest'
        minItems: 2
        type: array
      voucher_type:
        type: string
    required:
    - date
    - description
    - voucher_lines
    - voucher_type
    type: object
  models.VoucherDetail:
    properties:
      additional_data:
        $ref: '#/definitions/models.VoucherAdditionalData'
      attachments:
        items:
          $ref: '#/definitions/models.VoucherAttachment'
        type: array
      cost_center_id:
        type: string
      created_at:
        type: string
      created_by_user_id:
        type: string
      date:
        type: string
      description:
        type: string
      dsl_processing:
        $ref: '#/definitions/models.DSLProcessingInfo'
      id:
        type: string
      is_balanced:
        type: boolean
      number:
        type: string
      organization_id:
        type: string
      period:
        $ref: '#/definitions/models.Period'
      period_id:
        type: string
      posted_at:
        type: string
      posted_by_user_id:
        type: string
      reference:
        type: string
      status:
        description: DRAFT, POSTED, CANCELLED
        type: string
      third_party:
        $ref: '#/definitions/models.ThirdParty'
      third_party_id:
        type: string
      total_credit:
        type: number
      total_debit:
        type: number
      updated_at:
        type: string
      voucher_lines:
        items:
          $ref: '#/definitions/models.VoucherLine'
        type: array
      voucher_type:
        description: JOURNAL, PURCHASE, SALE, PAYMENT, RECEIPT, ADJUSTMENT
        type: string
    type: object
  models.VoucherLine:
    properties:
      account:
        allOf:
        - $ref: '#/definitions/models.Account'
        description: Relaciones
      account_id:
        type: string
      base_amount:
        type: number
      cost_center_id:
        type: string
      created_at:
        type: string
      credit_amount:
        type: number
      debit_amount:
        type: number
      description:
        type: string
      id:
        type: string
      line_number:
        type: integer
      tax_amount:
        type: number
      tax_rate:
        type: number
      third_party:
        $ref: '#/definitions/models.ThirdParty'
      third_party_id:
        type: string
      updated_at:
        type: string
      voucher_id:
        type: string
    type: object
  models.VoucherLineRequest:
    properties:
      account_id:
        type: string
      base_amount:
        type: number
      cost_center_id:
        type: string
      credit_amount:
        type: number
      debit_amount:
        type: number
      description:
        type: string
      tax_amount:
        type: number
      tax_rate:
        type: number
      third_party_id:
        type: string
    required:
    - account_id
    - description
    type: object
  models.VouchersListResponse:
    properties:
      pagination:
        $ref: '#/definitions/models.PaginationInfo'
      vouchers:
        items:
          $ref: '#/definitions/models.Voucher'
        type: array
    type: object
host: localhost:3000
info:
  contact:
    email: soporte@motorcontable.com
    name: Soporte API
  description: API para el Proof of Concept del Motor Contable Colombiano
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: Motor Contable POC API
  version: "1.0"
paths:
  /api/v1/organization/current:
    get:
      consumes:
      - application/json
      description: Retorna la información completa de la organización actual del sistema
      produces:
      - application/json
      responses:
        "200":
          description: Información de la organización
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.OrganizationDetail'
              type: object
        "404":
          description: Organización no encontrada
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Obtiene organización actual
      tags:
      - Organización
    put:
      consumes:
      - application/json
      description: Actualiza la configuración de la organización actual
      parameters:
      - description: Datos de la organización a actualizar
        in: body
        name: organization
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Organización actualizada
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.OrganizationDetail'
              type: object
        "400":
          description: Datos inválidos
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "404":
          description: Organización no encontrada
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Actualiza organización
      tags:
      - Organización
  /api/v1/organization/dashboard:
    get:
      consumes:
      - application/json
      description: Retorna métricas y KPIs principales de la organización
      produces:
      - application/json
      responses:
        "200":
          description: Datos del dashboard
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "404":
          description: Organización no encontrada
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Dashboard de organización
      tags:
      - Organización
  /api/v1/organization/validate:
    post:
      consumes:
      - application/json
      description: Ejecuta validaciones de reglas contables y de negocio sobre la
        organización
      produces:
      - application/json
      responses:
        "200":
          description: Resultado de validaciones
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "404":
          description: Organización no encontrada
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Valida reglas de negocio
      tags:
      - Organización
  /api/v1/vouchers:
    get:
      consumes:
      - application/json
      description: Retorna una lista paginada de comprobantes de la organización
      parameters:
      - default: 1
        description: Número de página
        in: query
        name: page
        type: integer
      - default: 20
        description: Elementos por página
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Lista de comprobantes
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VouchersListResponse'
              type: object
        "400":
          description: Parámetros inválidos
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Lista de comprobantes
      tags:
      - Comprobantes
    post:
      consumes:
      - application/json
      description: Crea un nuevo comprobante contable con sus líneas
      parameters:
      - description: Datos del comprobante
        in: body
        name: voucher
        required: true
        schema:
          $ref: '#/definitions/models.VoucherCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Comprobante creado
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Voucher'
              type: object
        "400":
          description: Datos inválidos
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Crear comprobante
      tags:
      - Comprobantes
  /api/v1/vouchers/{id}:
    get:
      consumes:
      - application/json
      description: Retorna el detalle completo de un comprobante específico
      parameters:
      - description: ID del comprobante
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Detalle del comprobante
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VoucherDetail'
              type: object
        "404":
          description: Comprobante no encontrado
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Detalle de comprobante
      tags:
      - Comprobantes
  /api/v1/vouchers/{id}/cancel:
    post:
      consumes:
      - application/json
      description: Cambia el estado del comprobante a cancelado
      parameters:
      - description: ID del comprobante
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Comprobante cancelado exitosamente
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "400":
          description: No se puede cancelar
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "404":
          description: Comprobante no encontrado
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Cancelar comprobante
      tags:
      - Comprobantes
  /api/v1/vouchers/{id}/post:
    post:
      consumes:
      - application/json
      description: Cambia el estado del comprobante a contabilizado y genera asiento
      parameters:
      - description: ID del comprobante
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Comprobante contabilizado exitosamente
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "400":
          description: No se puede contabilizar
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "404":
          description: Comprobante no encontrado
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Contabilizar comprobante
      tags:
      - Comprobantes
  /api/v1/vouchers/by-date-range:
    get:
      consumes:
      - application/json
      description: Retorna comprobantes filtrados por rango de fechas
      parameters:
      - description: Fecha inicial (YYYY-MM-DD)
        in: query
        name: start_date
        required: true
        type: string
      - description: Fecha final (YYYY-MM-DD)
        in: query
        name: end_date
        required: true
        type: string
      - default: 1
        description: Número de página
        in: query
        name: page
        type: integer
      - default: 20
        description: Elementos por página
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Lista de comprobantes
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VouchersListResponse'
              type: object
        "400":
          description: Parámetros inválidos
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Comprobantes por fechas
      tags:
      - Comprobantes
  /api/v1/vouchers/generate:
    post:
      consumes:
      - application/json
      description: Genera un comprobante automáticamente usando una plantilla DSL
      parameters:
      - description: Datos para generación
        in: body
        name: generation
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Comprobante generado
          schema:
            allOf:
            - $ref: '#/definitions/models.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Voucher'
              type: object
        "400":
          description: Datos inválidos
          schema:
            $ref: '#/definitions/models.StandardResponse'
        "500":
          description: Error interno del servidor
          schema:
            $ref: '#/definitions/models.StandardResponse'
      summary: Generar desde plantilla
      tags:
      - Comprobantes
schemes:
- http
- https
swagger: "2.0"
